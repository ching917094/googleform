<!doctype html>
<html lang="en">
<head>
    <!-- Required meta tags -->
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

    <!-- Bootstrap CSS -->
    <link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/bootstrap/4.4.1/css/bootstrap.min.css" integrity="sha384-Vkoo8x4CGsO3+Hhxv8T/Q5PaXtkKtu6ug5TOeNV6gBiFeWPGFN9MuhOf23Q9Ifjh" crossorigin="anonymous">
    <!-- 字形 -->
    <link href="https://fonts.googleapis.com/css?family=Galada|Noto+Sans+TC|Sriracha&display=swap" rel="stylesheet">
    <title>GOOD GOOD EAT</title>
    <style>
        .error {
            color: red;
        }
        body {            
			margin-top: 0px;
            margin-left: 0px;
            background: linear-gradient( /* linear-gradient()是一個函式,為線性漸層 */
            0deg, /* deg角度 */
            rgb(230, 204, 204) 0%,  /* 顏色 位置 ,顏色可以設定很多但位置要由小到大 */
            rgb(165, 212, 134) 20%,
            rgb(255, 253, 165) 40%,
            rgb(212, 208, 252) 60%,
            rgb(152, 236, 211) 80%,
            rgb(240, 202, 202) 100%
            );
        }
        h1 {
            font-family: 'Sriracha', cursive;
            font-size: 35px;
            color: teal;
        }
        label {
            font-family: 'Noto Sans TC', sans-serif;
            color: teal;
        }
    </style>
</head>
<body>
    
    <div class="container">
        <h1 class="mt-5 mb-5 text-center">GOOD GOOD EAT</h1>
        <!-- 表單返回頁，記得在表單加「 target='returnWin' 」 -->
        <iframe name="returnWin" style="display: none;" onload="this.onload=function(){window.location='ok.html'}"></iframe>
        <form target='returnWin' role="form" action="https://docs.google.com/forms/u/0/d/e/1FAIpQLSfEz4yel_hU6lfM_tgx5-RUdbXQCdedYKDWR3KJsY5iXzL_BA/formResponse" method="post" id="myForm" >
            <div class="row">         
                <!--桌號-->              
                <div class="col-sm-3">
                    <div class="form-group">
                    <label>桌號<span class="text-danger">*</span></label>
                        <select name="entry.588854887" id="588854887" value="" class="form-control" size="1">
                                                                            <!--required必填 size="1"控制下拉選單高度-->             
                            <option value="">請選擇桌號</option>
                            <option value="1號桌">1號桌</option>
                            <option value="2號桌">2號桌</option>
                            <option value="3號桌">3號桌</option>
                            <option value="4號桌">4號桌</option>
                            <option value="5號桌">5號桌</option>
                            <option value="6號桌">6號桌</option>
                        </select>
                    </div>
                </div>
                <!--合計-->              
                <div class="col-sm-3">
                    <div class="form-group">
                        <label>合計</label>
                        <input type="text" class="form-control" name="total" id="total" value="" readonly>
                    </div>
                </div>      
            </div>
            <div class="row">
                <!--雞腿飯-90元-->              
                <div class="col-sm-3">
                    <div class="form-group">
                        <label><span class="title">雞腿飯-90元</span><span class="text-danger">(請填數量)</span></label>
                        <input type="number" class="form-control amount" name="entry.175620156" id="175620156" value="0" min=0 onchange="calToal()">
                        <!--type="number"限制他只能輸入數字 min=0限制數量不能小於0-->
                    </div>
                </div>          
                <!--雞排飯-80元-->              
                <div class="col-sm-3">
                    <div class="form-group">
                        <label><span class="title">雞排飯-80元</span><span class="text-danger">(請填數量)</span></label>
                        <input type="number" class="form-control amount" name="entry.20342343" id="20342343" value="0" min=0 onchange="calToal()">
                    </div>
                </div>          
                <!--排骨飯-70元-->              
                <div class="col-sm-3">
                    <div class="form-group">
                        <label><span class="title">排骨飯-70元</span><span class="text-danger">(請填數量)</span></label>
                        <input type="number" class="form-control amount" name="entry.1666229335" id="1666229335" value="0" min=0 onchange="calToal()">
                    </div>
                </div>          
                <!--招牌飯-60元-->              
                <div class="col-sm-3">
                    <div class="form-group">
                        <label><span class="title">招牌飯-60元</span><span class="text-danger">(請填數量)</span></label>
                        <input type="number" class="form-control amount" name="entry.562920021" id="562920021" value="0" min=0 onchange="calToal()">
                    </div>
                </div>         
            </div>                 
            <div class="row">
                <div class="col-sm-12">  
                    <!-- 備註 -->
                    <div class="form-group">
                        <label class="control-label">備註</label>
                        <textarea class="form-control" rows="3" id="1524440298" name="entry.1524440298"></textarea>
                        <!--textarea表單元件,form-control拉到最寬+框線-->
                    </div>
                </div>
            </div>        
            <div class="text-center pb-3">
                <button type="submit" class="btn btn-primary">送出</button>
            </div>
        </form>
    </div>

    <!-- Optional JavaScript -->
    <!-- jQuery first, then Popper.js, then Bootstrap JS -->
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.4.1/jquery.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/popper.js@1.16.0/dist/umd/popper.min.js" integrity="sha384-Q6E9RHvbIyZFJoft+2mJbHaEWldlvI9IOYy5n3zV9zzTtmI3UksdQRVvoxMfooAo" crossorigin="anonymous"></script>
    <script src="https://stackpath.bootstrapcdn.com/bootstrap/4.4.1/js/bootstrap.min.js" integrity="sha384-wfSDF2E50Y2D1uUdj0O3uMBJnjuUD4Ih7YwaYd1iqfktj0Uod8GCExl3Og8ifwB6" crossorigin="anonymous"></script>
    <!-- 表單驗證,要吃jquery效果,要放在jquery之後 -->
    <script src="https://cdn.jsdelivr.net/npm/jquery-validation@1.19.1/dist/jquery.validate.min.js"></script>
    <script>
        /* 必填驗證程式碼寫法1
        $(function(){ 
            $("#myForm").validate(); // 必填,在要必填的項目上加上required連動
        }); */
        $(function(){ 
            $("#myForm").validate({
                submitHandler: function(form) {
                    form.submit();
                },
                rules: {
                    'entry.588854887' : { //必填欄位的name
                        required:true //必填驗證程式碼寫法2
                    },
                    'entry.175620156' : {
                        digits:true, //驗證整數
                        min:0        //驗證最小數字大於等於0   
                    },
                    'entry.20342343' : {
                        digits:true,
                        min:0                     
                    },
                    'entry.1666229335' : {
                        digits:true,
                        min:0                     
                    },
                    'entry.562920021' : {
                        digits:true,
                        min:0                     
                    },
                    'total' : { //必填欄位的name
                        required:true //必填驗證程式碼寫法2
                    },
                },messages: {
                    'entry.588854887' : {
                        required:"請輸入桌號" //可自行設定顯示文字
                    },
                    'entry.175620156' : {
                        digits:"請填整數",
                        min:"請填正確數量"                      
                    },
                    'entry.20342343' : {
                        digits:"請填整數",
                        min:"請填正確數量"                      
                    },
                    'entry.1666229335' : {
                        digits:"請填整數",
                        min:"請填正確數量"                      
                    },
                    'entry.562920021' : {
                        digits:"請填整數",
                        min:"請填正確數量"                      
                    },'total' : {
                        required:"尚未點餐" //可自行設定顯示文字
                    }
                }
            });
        });
        
        function calToal(){ // 自動計算合計金額函式
            var amounts = document.getElementsByClassName("amount");
            var titles = document.getElementsByClassName("title");
            var total = 0; //定義總和的起始
            for(var i=0; i < amounts.length; i++){
                var amount = document.getElementsByClassName("amount")[i].value; //取數量
                var title = document.getElementsByClassName("title")[i].innerText; //取標題
                var subArr = title.split("-"); //將字串拆開成名字和價錢
                var price = parseInt(subArr[1]); //將價錢字串改成值
                total += amount * price; //算式
            }
            if(total === 0) {
                document.getElementById("total").value = "";
            } else {
                document.getElementById("total").value = total;
            }            
        }
    </script>
</body>
</html>